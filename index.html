<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canada Budget 2025 Economic Simulator</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #0d1117; }
        .card { backdrop-filter: blur(10px); background-color: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); }
        .progress-bar-inner { transition: width 0.5s ease-in-out; }
        .gauge-ring {
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
            transition: stroke-dasharray 0.5s ease-in-out;
        }
    </style>
</head>
<body class="text-white min-h-screen p-4 sm:p-8">

    <div class="max-w-7xl mx-auto">
        <header class="text-center mb-8 sm:mb-12">
            <h1 class="text-4xl sm:text-5xl font-extrabold text-blue-400">
                Budget 2025: Canada Strong ðŸ‡¨ðŸ‡¦
            </h1>
            <p class="text-xl text-gray-400 mt-2">Macroeconomic Policy Simulator (8 Variables)</p>
        </header>

        <!-- Dynamic Policy Input Sliders -->
        <div class="card p-6 rounded-xl shadow-lg mb-12">
            <h2 class="text-2xl font-bold mb-4 text-yellow-300 border-b border-gray-700 pb-2">Policy & Risk Drivers</h2>
            
            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                <!-- 1. Investment Execution Risk (Multiplier) -->
                <div>
                    <label for="investment-multiplier" class="block text-sm font-medium text-gray-400 mb-1">Investment Multiplier (Project Execution):</label>
                    <input type="range" id="investment-multiplier" min="0.5" max="2.0" value="1.0" step="0.05" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer range-lg">
                    <span id="multiplier-display" class="block text-center mt-1 text-yellow-400 font-bold">1.00x</span>
                </div>
                
                <!-- 2. Fiscal Discipline (Savings) -->
                <div>
                    <label for="savings-success-slider" class="block text-sm font-medium text-gray-400 mb-1">Fiscal Discipline Success (Savings \%):</label>
                    <input type="range" id="savings-success-slider" min="0.0" max="1.5" value="0.75" step="0.05" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer range-lg">
                    <span id="savings-slider-display" class="block text-center mt-1 text-green-400 font-bold">75%</span>
                </div>

                <!-- 3. External Trade Tension (Risk) -->
                <div>
                    <label for="trade-tension-slider" class="block text-sm font-medium text-gray-400 mb-1">External Trade Tension (US Risk):</label>
                    <input type="range" id="trade-tension-slider" min="0.0" max="1.0" value="0.5" step="0.05" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer range-lg">
                    <span id="trade-tension-display" class="block text-center mt-1 text-red-400 font-bold">Medium Tension (50%)</span>
                </div>
                
                <!-- 4. Housing Delivery Success -->
                <div>
                    <label for="housing-delivery-slider" class="block text-sm font-medium text-gray-400 mb-1">Housing Delivery Success (Build Canada Homes):</label>
                    <input type="range" id="housing-delivery-slider" min="0.0" max="1.0" value="0.5" step="0.05" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer range-lg">
                    <span id="housing-slider-display" class="block text-center mt-1 text-purple-400 font-bold">50% Success</span>
                </div>

                <!-- NEW: 5. Monetary Policy Stance -->
                <div>
                    <label for="interest-rate-slider" class="block text-sm font-medium text-gray-400 mb-1">Monetary Policy Stance (Interest Rates):</label>
                    <input type="range" id="interest-rate-slider" min="0.0" max="1.0" value="0.5" step="0.05" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer range-lg">
                    <span id="interest-rate-display" class="block text-center mt-1 text-cyan-400 font-bold">Neutral Stance (2.50%)</span>
                </div>

                <!-- NEW: 6. Cost-Push Inflation Pressure -->
                <div>
                    <label for="inflation-slider" class="block text-sm font-medium text-gray-400 mb-1">Cost-Push Inflation Pressure (Commodity Risk):</label>
                    <input type="range" id="inflation-slider" min="0.0" max="1.0" value="0.5" step="0.05" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer range-lg">
                    <span id="inflation-pressure-display" class="block text-center mt-1 text-red-500 font-bold">Medium Pressure</span>
                </div>
                
                <!-- NEW: 7. Permanent Resident Immigration Levels -->
                <div>
                    <label for="pr-immigration-slider" class="block text-sm font-medium text-gray-400 mb-1">PR Immigration Levels (Long-Term Growth):</label>
                    <input type="range" id="pr-immigration-slider" min="0.0" max="1.0" value="0.5" step="0.05" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer range-lg">
                    <span id="pr-immigration-display" class="block text-center mt-1 text-blue-400 font-bold">380K / Year (Baseline)</span>
                </div>
            </div>
        </div>
        
        <!-- Simulation Output Grid -->
        <div class="grid md:grid-cols-4 gap-6 mb-12">
            
            <!-- Output Card 1: GDP Effect -->
            <div class="card p-6 rounded-xl shadow-lg text-center">
                <h2 class="text-xl font-bold mb-4 text-blue-300">Simulated 2030 Real GDP Effect</h2>
                <div class="mx-auto w-32 h-32 relative">
                    <svg class="w-full h-full" viewBox="0 0 100 100">
                        <!-- Background Circle -->
                        <circle cx="50" cy="50" r="45" fill="none" stroke="#2D3748" stroke-width="8" stroke-linecap="round"></circle>
                        <!-- Foreground Arc -->
                        <circle id="gdp-gauge" cx="50" cy="50" r="45" fill="none" stroke="#10B981" stroke-width="8" stroke-dasharray="0, 283" class="gauge-ring" stroke-linecap="round"></circle>
                        <text id="gdp-percentage" x="50" y="55" class="text-2xl font-extrabold" fill="#10B981" text-anchor="middle">0.0%</text>
                    </svg>
                </div>
                <p id="trade-drag-display" class="text-sm font-semibold text-red-400 mt-2">Net Drag: 0.0%</p>
                <p class="text-xs text-gray-500 mt-1">Change in GDP vs. Pre-Budget Baseline.</p>
            </div>
            
            <!-- Output Card 2: Inflation Rate (NEW) -->
            <div class="card p-6 rounded-xl shadow-lg text-center">
                <h2 class="text-xl font-bold mb-4 text-red-400">Simulated 2029-30 CPI Inflation</h2>
                <div class="text-center py-4">
                    <p id="inflation-rate-display" class="text-5xl font-extrabold text-red-500">2.0%</p>
                    <p class="text-lg font-semibold text-gray-400 mt-2">BoC Target: <span class="text-cyan-400">2.0%</span></p>
                </div>
                <p class="text-xs text-gray-500 mt-1">Testing the balance of fiscal stimulus vs. monetary policy.</p>
            </div>
            
            <!-- Output Card 3: Debt-to-GDP -->
            <div class="card p-6 rounded-xl shadow-lg">
                <h2 class="text-xl font-bold mb-4 text-blue-300">Simulated 2029-30 Debt-to-GDP</h2>
                <div class="text-center py-4">
                    <p id="debt-gdp-display" class="text-5xl font-extrabold text-blue-400">42.4%</p>
                    <p class="text-lg font-semibold text-gray-400 mt-2">Start 2025: <span class="text-blue-200">42.4%</span></p>
                </div>
                <div class="h-2 bg-gray-700 rounded-full mt-2">
                    <div id="debt-gdp-tracker" class="progress-bar-inner h-full bg-blue-500 rounded-full" style="width: 100%;"></div>
                </div>
                <p class="text-xs text-gray-500 mt-1">Lower is better. Success means the ratio declines.</p>
            </div>

            <!-- Output Card 4: Labour & Housing -->
            <div class="card p-6 rounded-xl shadow-lg">
                <h2 class="text-xl font-bold mb-4 text-purple-300">Labour & Housing Stability</h2>
                <div class="text-center py-1">
                    <p class="text-lg font-semibold">Unemployment Rate:</p>
                    <p id="unemployment-rate-display" class="text-4xl font-extrabold text-yellow-400">7.0%</p>
                </div>
                <div class="text-center py-1 mt-2">
                    <p class="text-lg font-semibold">5-Year Housing Target:</p>
                    <p id="housing-target-display" class="text-4xl font-extrabold text-purple-400">0 Homes</p>
                </div>
                <p class="text-xs text-gray-500 mt-1">Trade/Execution Risk vs. Immigration Levels.</p>
            </div>
        </div>

        <!-- Detail Metrics & Progress Trackers -->
        <div class="grid md:grid-cols-2 gap-6">

            <!-- Detail 1: Fiscal & Investment Metrics -->
            <div class="card p-6 rounded-xl shadow-lg">
                <h3 class="text-xl font-bold mb-4 text-yellow-300">Investment & Savings Details</h3>
                <div class="space-y-3">
                    <p class="text-lg font-semibold">Public Investment (5YR): <span class="float-right text-yellow-400">$280.0B</span></p>
                    <p class="text-lg font-semibold">Catalyzed Private Investment: <span id="catalyzed-private-investment" class="float-right text-white">$0.0B</span></p>
                    <p class="text-lg font-semibold border-t border-gray-700 pt-3">Total Investment (5YR): <span id="total-investment" class="float-right text-white font-extrabold">$280.0B</span></p>
                    
                    <div class="pt-4 border-t border-gray-700">
                        <p class="text-lg font-semibold">5-Year Savings Goal: <span class="float-right text-green-500">$60.0B</span></p>
                        <p id="realized-savings-display-detail" class="text-md text-gray-400 mt-1">Realized: $45.0B (75% of target)</p>
                        <div class="h-2 bg-gray-700 rounded-full mt-2">
                            <div id="savings-progress-detail" class="progress-bar-inner h-full bg-green-500 rounded-full" style="width: 75%;"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Detail 2: Trade & Diversification -->
            <div class="card p-6 rounded-xl shadow-lg">
                <h3 class="text-xl font-bold mb-4 text-blue-300">Trade Diversification Progress</h3>
                <p class="text-sm text-gray-400 mb-4">Target: Double Non-US Exports over 10 years (Proxy for Success).</p>
                
                <div class="mt-6 pt-4 border-t border-gray-700">
                    <p class="font-bold text-lg mb-2 text-green-400">Trade Diversification Goal</p>
                    <div class="h-6 bg-gray-700 rounded-full">
                        <div id="export-progress" class="progress-bar-inner h-full bg-green-500 rounded-full flex items-center justify-end pr-2" style="width: 0%;">
                            <span id="export-progress-text" class="text-xs font-bold text-white">0% of goal achieved</span>
                        </div> 
                    </div>
                </div>

                <div class="pt-4 mt-4 border-t border-gray-700">
                    <p class="text-lg font-semibold">Simulated Permanent Residents (5YR):</p>
                    <p id="pr-immigration-total" class="text-2xl font-extrabold text-blue-400">1,900,000</p>
                    <p class="text-xs text-gray-500 mt-1">Baseline: 1.9 Million (380K/yr) over 5 years.</p>
                </div>
            </div>

        </div>

        <!-- Risk & Credibility Section -->
        <div class="text-center text-gray-500 pt-8 mt-4">
            <p class="text-sm">The model is highly simplified and illustrative. It demonstrates the critical dependencies between fiscal policy (savings), capital investment (execution), monetary policy (interest rates/inflation), and external trade risk.</p>
        </div>
    </div>

    <script>
        // --- Core Budget Constants ---
        const PUBLIC_INVESTMENT_5YR = 280; // $B
        const PRIVATE_INVESTMENT_CATALYZATION_TARGET = 500; // $B (Private investment needed for MAX_GDP_BOOST)
        const SAVINGS_GOAL = 60; // $B
        const MAX_GDP_BOOST = 3.5; // % GDP boost by 2030 (from investment alone)
        const MAX_TRADE_DRAG_GDP = 1.2; // Max GDP % drag due to high trade tension
        
        // Fiscal/Debt Constants
        const BASE_DEBT_GDP_2025 = 42.4; // 2025-26 starting debt-to-GDP
        const TARGET_DEBT_GDP_DOWNSIDE = 45.3; // Projected ratio under worst-case scenario
        
        // Monetary/Inflation Constants
        const BASE_INTEREST_RATE = 2.50; // Neutral stance rate (Proxy)
        const RATE_RANGE = 1.00; // Range of rate movement (e.g., 2.00% to 3.00%)
        const INFLATION_TARGET = 2.0;
        const INFLATION_SHOCK_MAX = 1.5; // Max % increase from cost-push shock
        const INFLATION_FISCAL_PULL = 0.5; // Max % pull from max fiscal stimulus

        // Socio-Economic Constants
        const HOUSING_TARGET_5YR = 100000; 
        const BASE_UNEMPLOYMENT_RATE = 7.0; 
        const UPSIDE_UNEMPLOYMENT_RATE = 6.0; 
        const PR_IMMIGRATION_BASELINE = 380000; // Annual PR Baseline
        const PR_IMMIGRATION_RANGE = 100000; // +/- range for PR annual targets

        // --- DOM Elements (7 Sliders, 10 Outputs) ---
        const multiplierSlider = document.getElementById('investment-multiplier');
        const savingsSlider = document.getElementById('savings-success-slider');
        const tradeTensionSlider = document.getElementById('trade-tension-slider');
        const housingDeliverySlider = document.getElementById('housing-delivery-slider');
        const interestRateSlider = document.getElementById('interest-rate-slider'); // NEW
        const inflationSlider = document.getElementById('inflation-slider'); // NEW
        const prImmigrationSlider = document.getElementById('pr-immigration-slider'); // NEW

        const multiplierDisplay = document.getElementById('multiplier-display');
        const savingsSliderDisplay = document.getElementById('savings-slider-display');
        const tradeTensionDisplay = document.getElementById('trade-tension-display');
        const housingSliderDisplay = document.getElementById('housing-slider-display');
        const interestRateDisplay = document.getElementById('interest-rate-display'); // NEW
        const inflationPressureDisplay = document.getElementById('inflation-pressure-display'); // NEW
        const prImmigrationDisplay = document.getElementById('pr-immigration-display'); // NEW
        const catalyzedPrivateInvestmentDisplay = document.getElementById('catalyzed-private-investment');
        const totalInvestmentDisplay = document.getElementById('total-investment');
        const gdpGauge = document.getElementById('gdp-gauge');
        const gdpPercentage = document.getElementById('gdp-percentage');
        const debtGdpDisplay = document.getElementById('debt-gdp-display');
        const debtGdpTracker = document.getElementById('debt-gdp-tracker');
        const housingTargetDisplay = document.getElementById('housing-target-display');
        const unemploymentRateDisplay = document.getElementById('unemployment-rate-display');
        const tradeDragDisplay = document.getElementById('trade-drag-display');
        const inflationRateDisplay = document.getElementById('inflation-rate-display'); // NEW
        const prImmigrationTotal = document.getElementById('pr-immigration-total'); // NEW
        // FIX: Removed realizedSavingsDisplay which was referencing a non-existent ID.
        const realizedSavingsDisplayDetail = document.getElementById('realized-savings-display-detail'); 
        const savingsProgress = document.getElementById('savings-progress'); // This ID is NOT in the HTML anymore, fixing below
        const savingsProgressDetail = document.getElementById('savings-progress-detail');
        const exportProgress = document.getElementById('export-progress');
        const exportProgressText = document.getElementById('export-progress-text');
        
        // --- Gauge Constants ---
        const circumference = 2 * Math.PI * 45; // Circumference for r=45
        gdpGauge.setAttribute('stroke-dasharray', `${0}, ${circumference}`);
        
        // --- Update Function ---
        function updateEconomicSimulation() {
            // --- Inputs ---
            const investmentMultiplier = parseFloat(multiplierSlider.value); // 0.5 to 2.0
            const savingsSuccessRate = parseFloat(savingsSlider.value); // 0.0 to 1.5
            const tradeTension = parseFloat(tradeTensionSlider.value); // 0.0 to 1.0
            const housingDeliveryRate = parseFloat(housingDeliverySlider.value); // 0.0 to 1.0
            const interestRateStance = parseFloat(interestRateSlider.value); // 0.0 (dovish) to 1.0 (hawkish)
            const inflationPressure = parseFloat(inflationSlider.value); // 0.0 (low) to 1.0 (high)
            const prImmigrationNormalized = parseFloat(prImmigrationSlider.value); // 0.0 (low) to 1.0 (high)

            // --- Update Slider Displays ---
            multiplierDisplay.textContent = `${investmentMultiplier.toFixed(2)}x`;
            savingsSliderDisplay.textContent = `${(savingsSuccessRate * 100).toFixed(0)}%`;
            housingSliderDisplay.textContent = `${(housingDeliveryRate * 100).toFixed(0)}% Success`;

            // Trade Tension Display
            let tensionText = "Low Tension (External Risk)";
            if (tradeTension >= 0.66) tensionText = "High Tension (External Risk)";
            else if (tradeTension >= 0.33) tensionText = "Medium Tension (External Risk)";
            tradeTensionDisplay.textContent = tensionText;

            // Interest Rate Display
            const realizedRate = BASE_INTEREST_RATE + (interestRateStance - 0.5) * (RATE_RANGE * 2);
            interestRateDisplay.textContent = `${realizedRate.toFixed(2)}% (Stance)`;

            // Inflation Pressure Display
            let pressureText = "Low Pressure";
            if (inflationPressure >= 0.66) pressureText = "High Pressure";
            else if (inflationPressure >= 0.33) pressureText = "Medium Pressure";
            inflationPressureDisplay.textContent = pressureText;
            
            // PR Immigration Display
            const annualPR = PR_IMMIGRATION_BASELINE + (prImmigrationNormalized - 0.5) * (PR_IMMIGRATION_RANGE * 2);
            prImmigrationDisplay.textContent = `${(annualPR / 1000).toFixed(0)}K / Year`;
            prImmigrationTotal.textContent = `${(annualPR * 5 / 1000).toFixed(0)}K`;


            // --- 1. GDP AND INVESTMENT CALCULATION ---
            // High interest rates suppress investment multiplier
            const investmentSuppression = (interestRateStance - 0.5) * 0.3; // -0.15 to +0.15 suppression on multiplier
            const effectiveMultiplier = Math.max(0.5, investmentMultiplier - investmentSuppression);
            
            const privateInvestment = PUBLIC_INVESTMENT_5YR * (effectiveMultiplier - 1.0);
            const realizedPrivateInvestment = Math.max(0, privateInvestment); 
            const totalInvestment = PUBLIC_INVESTMENT_5YR + realizedPrivateInvestment;
            
            // PR Immigration (long-term growth factor)
            const prGrowthFactor = (prImmigrationNormalized - 0.5) * 0.5; // -0.25 to +0.25 on GDP base boost
            
            let baseGDPBoost = (realizedPrivateInvestment / PRIVATE_INVESTMENT_CATALYZATION_TARGET) * MAX_GDP_BOOST;
            baseGDPBoost = Math.max(0.0, baseGDPBoost + prGrowthFactor); // Add PR factor
            baseGDPBoost = Math.min(MAX_GDP_BOOST + 0.5, baseGDPBoost); // Cap potential upside

            // Apply Trade Tension Drag
            const tradeDrag = tradeTension * MAX_TRADE_DRAG_GDP;
            let realizedGDPBoost = Math.max(0.0, baseGDPBoost - tradeDrag);
            

            // --- 2. INFLATION CALCULATION (NEW) ---
            // Inflation = Target + Cost-Push Shock + Demand-Pull from Fiscal Stimulus - Monetary Suppression
            
            const costPush = inflationPressure * INFLATION_SHOCK_MAX;
            const demandPull = (totalInvestment / (PUBLIC_INVESTMENT_5YR + PRIVATE_INVESTMENT_CATALYZATION_TARGET)) * INFLATION_FISCAL_PULL;
            const monetarySuppression = (interestRateStance - 0.5) * 1.0; // Higher rates suppress inflation

            const finalInflation = INFLATION_TARGET + costPush + demandPull - monetarySuppression;
            
            // --- 3. FISCAL & DEBT-TO-GDP CALCULATION ---
            const realizedSavings = SAVINGS_GOAL * savingsSuccessRate;
            
            // Debt-to-GDP: Depends on Savings, Growth (GDP Boost), and Interest Rate Costs.
            const savingsNormalized = (realizedSavings / SAVINGS_GOAL);
            const growthNormalized = realizedGDPBoost / MAX_GDP_BOOST;

            // Interest rate costs increase debt-to-GDP: High rates push it up.
            const rateInfluence = (realizedRate - BASE_INTEREST_RATE) * 0.5; // 0.5% max increase
            
            // Simplified Debt Calculation
            const successWeight = (savingsNormalized * 0.5) + (growthNormalized * 0.5); // 0 to 1
            const debtTrend = (TARGET_DEBT_GDP_DOWNSIDE - BASE_DEBT_GDP_2025) * (1 - successWeight);
            const finalDebtGdp = BASE_DEBT_GDP_2025 + debtTrend + rateInfluence;


            // --- 4. SOCIO-ECONOMIC CALCULATION ---
            const realizedHousingTarget = HOUSING_TARGET_5YR * housingDeliveryRate;

            // Unemployment Rate: Growth (investment) reduces it, while trade risk and PR immigration friction increase it.
            const investmentInfluence = (BASE_UNEMPLOYMENT_RATE - UPSIDE_UNEMPLOYMENT_RATE) * (effectiveMultiplier - 0.5) / 1.5; 
            const tensionInfluence = tradeTension * 0.3; // max 0.3 increase from trade
            const prFriction = (prImmigrationNormalized - 0.5) * 0.3; // max 0.3 from PR changes
            
            const finalUnemploymentRate = Math.max(UPSIDE_UNEMPLOYMENT_RATE, BASE_UNEMPLOYMENT_RATE - investmentInfluence + tensionInfluence + prFriction);

            // --- 5. TRADE DIVERSIFICATION CALCULATION ---
            const tradeSuccessBase = (realizedPrivateInvestment / PRIVATE_INVESTMENT_CATALYZATION_TARGET);
            const tradeRiskPenalty = tradeTension * 0.5; 
            const finalTradeSuccess = Math.max(0, tradeSuccessBase - tradeRiskPenalty);
            const tradeSuccessPercentage = Math.min(100, finalTradeSuccess * 100);

            // --- 6. Update Visualizations ---
            
            // Investment & GDP
            catalyzedPrivateInvestmentDisplay.textContent = `$${realizedPrivateInvestment.toFixed(1)}B`;
            totalInvestmentDisplay.textContent = `${totalInvestment.toFixed(1)}B`;
            tradeDragDisplay.textContent = `Net Drag: -${tradeDrag.toFixed(1)}%`;

            const percentageOfMax = realizedGDPBoost / (MAX_GDP_BOOST + 0.5); // Use max potential for gauge scaling
            const strokeDashoffset = percentageOfMax * circumference;
            gdpGauge.style.strokeDasharray = `${strokeDashoffset}, ${circumference}`;
            gdpPercentage.textContent = `${realizedGDPBoost.toFixed(1)}%`;
            gdpGauge.setAttribute('stroke', realizedGDPBoost > 2.5 ? '#10B981' : (realizedGDPBoost > 1.0 ? '#FBBF24' : '#EF4444')); 
            gdpPercentage.setAttribute('fill', realizedGDPBoost > 2.5 ? '#10B981' : (realizedGDPBoost > 1.0 ? '#FBBF24' : '#EF4444'));
            
            // Inflation Rate (NEW)
            inflationRateDisplay.textContent = `${finalInflation.toFixed(1)}%`;
            inflationRateDisplay.style.color = finalInflation > INFLATION_TARGET + 0.5 ? '#EF4444' : (finalInflation > INFLATION_TARGET ? '#FBBF24' : '#10B981');
            
            // Fiscal & Debt
            const rsText = `$${realizedSavings.toFixed(1)}B (${(savingsSuccessRate * 100).toFixed(0)}% of target)`;
            // Removed realizedSavingsDisplay.textContent update
            realizedSavingsDisplayDetail.textContent = `Realized: ${rsText}`;

            // The savings progress bar in the input section was removed, so we only update the detail section bar.
            savingsProgressDetail.style.width = `${(savingsSuccessRate * 100)}%`;
            savingsProgressDetail.style.backgroundColor = savingsSuccessRate >= 1.0 ? '#10B981' : (savingsSuccessRate > 0.5 ? '#FBBF24' : '#EF4444');

            debtGdpDisplay.textContent = `${finalDebtGdp.toFixed(1)}%`;
            // Visualization: Track Debt-to-GDP stability (100% means we hit the lowest possible debt ratio)
            const debtProgress = 100 - ((finalDebtGdp - BASE_DEBT_GDP_2025) / (TARGET_DEBT_GDP_DOWNSIDE - BASE_DEBT_GDP_2025)) * 100;
            debtGdpTracker.style.width = `${Math.min(100, Math.max(0, debtProgress))}%`;
            debtGdpTracker.style.backgroundColor = finalDebtGdp <= BASE_DEBT_GDP_2025 ? '#3B82F6' : (finalDebtGdp < TARGET_DEBT_GDP_DOWNSIDE ? '#FBBF24' : '#EF4444');

            // Housing and Labour
            housingTargetDisplay.textContent = `${(realizedHousingTarget / 1000).toFixed(0)}K Homes`;
            unemploymentRateDisplay.textContent = `${finalUnemploymentRate.toFixed(1)}%`;
            
            // Trade Diversification Progress
            exportProgress.style.width = `${tradeSuccessPercentage.toFixed(0)}%`;
            exportProgressText.textContent = `${tradeSuccessPercentage.toFixed(0)}% of goal achieved`;
            exportProgress.style.backgroundColor = tradeSuccessPercentage > 50 ? '#10B981' : '#FBBF24';

        }

        // Set initial state
        updateEconomicSimulation();

        // Add event listeners
        multiplierSlider.addEventListener('input', updateEconomicSimulation);
        savingsSlider.addEventListener('input', updateEconomicSimulation);
        tradeTensionSlider.addEventListener('input', updateEconomicSimulation);
        housingDeliverySlider.addEventListener('input', updateEconomicSimulation);
        interestRateSlider.addEventListener('input', updateEconomicSimulation); // NEW
        inflationSlider.addEventListener('input', updateEconomicSimulation); // NEW
        prImmigrationSlider.addEventListener('input', updateEconomicSimulation); // NEW
    </script>
</body>
</html>
